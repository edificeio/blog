import{al as g,am as i,an as l,ao as f}from"./index-XY-EGNwC.js";import{odeServices as n,ERROR_CODE as y}from"/assets/js/edifice-ts-client/index.js";const d="blog";function P(t){n.notify().events().publish(d,{name:"error",data:t})}async function u(t){const e=await t;return n.http().isResponseError()?(P({code:y.TRANSPORT_ERROR,text:n.http().latestResponse.statusText}),null):e}function m(t){return u(n.http().get(`/blog/${t}`))}function b(t){return u(n.http().get(`/blog/counter/${t}`))}function h(t,e){return u(n.http().get(`/blog/post/${t}/${e}?state=PUBLISHED`))}function q(t,e,o,r){let s=`/blog/post/list/all/${t}?page=${e}`;return o&&(s+=`&search=${o}`),r!=null&&r.length&&(s+=`&states=${r.join(",")}`),u(n.http().get(s))}const c=g()(t=>({postsFilters:{states:[],search:""},posts:[],updaters:{setPostsFilter:e=>t({postsFilters:e}),setPosts:e=>t({posts:e})}})),R=()=>c(t=>t.postsFilters),Q=()=>c(t=>t.updaters),F=t=>({queryKey:["blog",t],queryFn:()=>m(t)}),$=t=>({queryKey:["blog","counter",t],queryFn:()=>b(t)}),x=(t,e)=>({queryKey:["post",e],queryFn:()=>h(t,e)}),E=(t,e,o)=>({queryKey:["postList",{blogId:t,search:e,states:o}],queryFn:({pageParam:r=0})=>q(t,r,e,o),initialPageParam:0,getNextPageParam:(r,s,a)=>{if(r.length!==0)return a+1}}),C=t=>{const e=i();t||(e.blogId||console.error("blogId is not defined"),t=e.blogId);const o=l(F(t));return{blog:o.data,query:o}},O=t=>{const e=i();t||(e.blogId||console.error("blogId is not defined"),t=e.blogId);const o=l($(t));return{counters:o.data,query:o}},S=t=>{var a;const e=i(),{states:o,search:r}=R();t||(e.blogId||console.error("blogId is not defined"),t=e.blogId);const s=f(E(t,r,o));return{posts:(a=s.data)==null?void 0:a.pages.flatMap(p=>p),query:s}};export{O as a,C as b,S as c,F as d,$ as e,E as m,x as p,Q as u};
