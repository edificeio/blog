import{b as v,ah as I,y as T,j as t,M as a,ai as y,B as h,r as j,aj as S,K as b,_ as M,S as w,ak as C}from"./index-XY-EGNwC.js";import"/assets/js/edifice-ts-client/index.js";function B({onSuccess:s}){const[l,r]=j.useState(),n=S(),d=b(),i=M(),{foldTreeItem:c,unfoldTreeItem:u}=w(),m=C();async function f(){try{if(!l)throw new Error("explorer.move.selection.empty");await n.mutate(l),await(s==null?void 0:s())}catch(e){console.error(e)}}const x=e=>{var p;for(const o of d)if(e===o.id||e===o.parentId)return!1;for(const o of i)if(e===((o==null?void 0:o.folderIds)&&o.folderIds[0])||((p=o==null?void 0:o.folderIds)==null?void 0:p.length)===0&&e==="default")return!1;return!0};return{disableSubmit:!l,handleTreeItemSelect:e=>{x(e)?r(e):r(void 0)},handleTreeItemFold:c,handleTreeItemUnfold:async e=>await u(e,m),onMove:()=>{f()}}}function $({isOpen:s,onSuccess:l,onCancel:r}){const{t:n}=v(),{handleTreeItemFold:d,handleTreeItemSelect:i,handleTreeItemUnfold:c,onMove:u,disableSubmit:m}=B({onSuccess:l}),f=I();return T.createPortal(t.jsxs(a,{isOpen:s,onModalClose:r,id:"moveModal",children:[t.jsx(a.Header,{onModalClose:r,children:n("explorer.move.title")}),t.jsx(a.Subtitle,{children:n("explorer.move.subtitle")}),t.jsx(a.Body,{children:t.jsx(y,{data:f,onTreeItemSelect:i,onTreeItemFold:d,onTreeItemUnfold:c})}),t.jsxs(a.Footer,{children:[t.jsx(h,{color:"tertiary",onClick:r,type:"button",variant:"ghost",children:n("explorer.cancel")}),t.jsx(h,{color:"primary",onClick:u,type:"button",variant:"filled",disabled:m,children:n("explorer.move")})]})]}),document.getElementById("portal"))}export{$ as default};
